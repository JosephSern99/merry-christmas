<div *ngIf="detail" class="listing-popup-page-container p-0">

    <div class="row breadcrumb-container mb-4">
        <div class="col-8">
            <app-planner-note-breadcrumb [uiBreadcrumbs]="getBreadcrumbs()" *ngIf="true"></app-planner-note-breadcrumb>
        </div>

        <div class="col-4 text-right">
            <button mat-button class="secondary purple mr-2" title="Back to internal notes listing page"><a  [routerLink]="['../']"> Back </a></button>
            <button mat-button class="secondary darkblue mr-2" >
                <a [routerLink]="['edit']">Edit </a></button>
            <button *ngIf="!isEndorsedNote()" mat-button class="secondary red mr-3" (click)="removePlannerNote()">Delete</button>
        </div>
    </div>

    <div class="details-wrapper">
        <div class="information">
            <div>
                <div class="detail-label text-dark">
                    Title
                </div>
                <div class="clickable font-weight-bold pointer-none text-break">
                    {{detail.title}}
                </div>
            </div>
            <div class="mt-3">
                <div class="detail-label text-dark">
                    Description
                </div>
                <div class="detail-data font-weight-normal">
                    <div class="agmo-two-lines-wrapper" [innerHTML]="detail.description"></div>
                </div>
            </div>
            <div class="mt-3">
                <div class="detail-label">
                    Sent On {{detail.createdAt}}
<!--                    Sent on {{detail.createdAt | date: 'DD-MM-YYYY HH:MM '}}-->
                </div>
            </div>
        </div>
    </div>

    <div class="details-wrapper mt-4 p-0 pb-5">
        <div class="p-3 font-weight-bold">Client List </div>
        <div class="contain-container">
            <mat-table matSort class="agmo-table" [dataSource]="listingDataSource" (matSortChange)="onSortChange($event)">
                <ng-container matColumnDef="index">
                    <th mat-header-cell *matHeaderCellDef>No.</th>
                    <td mat-cell *matCellDef="let customer">{{ customer.index }}</td>
                </ng-container>

                <ng-container matColumnDef="fullname">
                    <th mat-header-cell *matHeaderCellDef>Name</th>
                    <td mat-cell class="clickable" *matCellDef="let customer" >
                        <a [routerLink]="getListDetailRoute(customer.id)">
                        {{customer.fullname || '-'}}
                        </a>
                    </td>
                </ng-container>

                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef>Email</th>
                    <td mat-cell *matCellDef="let customer">{{customer.email || '-'}}</td>
                </ng-container>

                <ng-container matColumnDef="fullPhoneNumber">
                    <th mat-header-cell *matHeaderCellDef>Phone No.</th>
                    <td mat-cell *matCellDef="let customer">{{customer.fullPhoneNumber || '-'}}</td>
                </ng-container>

                <ng-container matColumnDef="signingStatus">
                    <th mat-header-cell *matHeaderCellDef>Status</th>
                    <td mat-cell *matCellDef="let customer" class="size-s">
                        <span class="agmo-status text-nowrap" [ngClass]="customer.status === 2 ? 'green' : 'orange'">
                            {{EndorseStatus[customer.status]}}
                        </span>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                <ng-container matColumnDef="loading">
                    <td mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length">
                        <mat-progress-bar mode="query"></mat-progress-bar>
                    </td>
                </ng-container>
                <ng-container matColumnDef="noData">
                    <td mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length" class="no-data">No data</td>
                </ng-container>

                <tr class="no-data" mat-footer-row *matFooterRowDef="['loading']" [class.show]="isListingLoading"></tr>
                <tr class="no-data" mat-footer-row *matFooterRowDef="['noData']" [class.show]="isListEmpty()"></tr>
            </mat-table>

            <mat-paginator [length]="pagination.length" [pageSize]="pagination.pageSize" [pageIndex]="pagination.pageIndex" [pageSizeOptions]="pagination.pageSizeOptions" (page)="onPaginationChange($event)"></mat-paginator>
        </div>
    </div>
</div>
