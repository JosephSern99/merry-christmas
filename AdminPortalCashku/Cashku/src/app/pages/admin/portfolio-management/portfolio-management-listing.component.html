<!-- This is skeleton HTML required for the Listing page. -->
<div class="listing-page">
    <div [class.opacity-0]="isDetailPopupShow">
        <div class="title-container mb-4">
            <div class="page-title">PORTFOLIO MANAGEMENT</div>
        </div>

        <div class="contain-container">
            <mat-table matSort class="agmo-table" [dataSource]="listingDataSource"
                (matSortChange)="onSortChange($event)">
                <ng-container matColumnDef="index">
                    <th mat-header-cell *matHeaderCellDef>Portfolio</th>
                    <td mat-cell *matCellDef="let portfolio" class="portfolio-header">{{PortfolioType[portfolio.portfolioType].label}}
                        ({{portfolio.funds.length}})</td>
                </ng-container>

                <ng-container matColumnDef="lowestReturnPercentage">
                    <th mat-header-cell  *matHeaderCellDef>Lowest Return</th>
                    <td mat-cell class="font-weight-bold font-light-brown" *matCellDef="let portfolio" >
                        <a [routerLink]="['detail', portfolio.id]">
                        {{portfolio.lowestReturnPercentage}} <span *ngIf="portfolio.lowestReturnPercentage">%</span>
                        </a>
                    </td>
                </ng-container>

                <ng-container matColumnDef="averageReturnPercentage">
                    <th mat-header-cell *matHeaderCellDef >Average Return</th>
                    <td mat-cell class="font-weight-bold font-purple" *matCellDef="let portfolio">
                        {{portfolio.averageReturnPercentage}} <span *ngIf="portfolio.averageReturnPercentage">%</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="highestReturnPercentage">
                    <th mat-header-cell *matHeaderCellDef >Highest Return</th>
                    <td mat-cell class="font-weight-bold font-grey" *matCellDef="let portfolio">
                        {{portfolio.highestReturnPercentage}} <span *ngIf="portfolio.highestReturnPercentage">%</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let portfolio">
                        <div class="float-right pointer portfolio-button">
                            <a [routerLink]="['edit', portfolio.id]">
                            Edit
                            </a>
                        </div>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                <ng-container matColumnDef="loading">
                    <td mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length">
                        <mat-progress-bar mode="query"></mat-progress-bar>
                    </td>
                </ng-container>
                <ng-container matColumnDef="noData">
                    <td mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length" class="no-data">No
                        data</td>
                </ng-container>

                <tr class="no-data" mat-footer-row *matFooterRowDef="['loading']" [class.show]="isListingLoading"></tr>
                <tr class="no-data" mat-footer-row *matFooterRowDef="['noData']" [class.show]="isListEmpty()"></tr>
            </mat-table>
        </div>
    </div>

    <!-- This is required for the Popup page to overlay the Listing page. -->
    <div class="listing-popup-page" [class.show]="isDetailPopupShow">
        <!-- This spinner or loading button is to indicate popup page is loading. -->
        <div class="center">
            <mat-spinner></mat-spinner>
        </div>

        <!-- Popup page contain is render within here. -->
        <router-outlet (activate)="onOutletActivate()" (deactivate)="onOutletDeactivate($event)"></router-outlet>
    </div>
</div>
