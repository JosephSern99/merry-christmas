<div class="container-fluid">
    <div class="modal-body p-2 pt-4">
        <strong class="text-darkblue font-size-regular mt-2">Assign Client</strong><br /><br />
        <label class="text-default">Client:</label>
        <mat-form-field class="dropdown-input-field" appearance="outline">
            <mat-select [formControl]="customerControl" placeholder="Search Client" [multiple]="true" panelClass="search-customer-panel-class"
                (openedChange)="updateSelection($event)" readonly>
                <mat-option>
                    <ngx-mat-select-search  [showToggleAllCheckbox]="true"
                                            (toggleAll)="toggleAll($event)"
                                            [formControl]="searchControl"
                                            noEntriesFoundLabel="No Matching Customer Name found"
                                            [placeholderLabel]="'Search'">
                    </ngx-mat-select-search>
                </mat-option>
                <div class="dropdown-label d-flex my-1" *ngIf="customerList.length > 0">
                    <div>Name</div>
                    <div>Plan Status</div>
                    <div>Email</div>
                    <div>Phone No.</div>
                    <div>Registration Status</div>
                </div>

                <mat-option *ngFor="let customer of customerList" [value]="customer">
                    <div class="dropdown-table-option d-flex">
                        <div class="font-weight-bold">{{customer.fullName}}</div>
                        <div>{{CustomerPlan[customer.advisoryPlan] || '-'}}</div>
                        <div>{{customer.email}}</div>
                        <div>{{customer.fullPhoneNumber}}</div>
                        <div class="status" [class.success]="customer.registerStep == 6">
                            {{RegisterStep[customer.registerStep]?.label || '-'}}
                        </div>
                    </div>
                </mat-option>
            </mat-select>
            <mat-icon matSuffix>
                <img class="dropdown-icon" src="assets/images/arrow_down_grey@2x.png">
            </mat-icon>
        </mat-form-field>
    </div>

    <div class="row contain-container" *ngIf="selectedCustomers.length > 0">
        <div class="col-12">
            <mat-table matSort class="agmo-table" [dataSource]="selectedCustomers" (matSortChange)="onSortChange($event)">
                <ng-container matColumnDef="index">
                    <th mat-header-cell *matHeaderCellDef>No.</th>
                    <td mat-cell class="size-index" *matCellDef="let customer">{{customer.index}}</td>
                </ng-container>

                <ng-container matColumnDef="fullName">
                    <th mat-header-cell  *matHeaderCellDef>Name</th>
                    <td mat-cell class="font-weight-bold" *matCellDef="let customer">{{customer.fullName || '-'}}</td>
                </ng-container>

                <ng-container matColumnDef="advisoryPlan">
                    <th mat-header-cell  *matHeaderCellDef>Plan Status</th>
                    <td mat-cell *matCellDef="let customer">{{CustomerPlan[customer.advisoryPlan] || '-'}}</td>
                </ng-container>

                <ng-container matColumnDef="email">
                    <th mat-header-cell  *matHeaderCellDef>Email</th>
                    <td mat-cell *matCellDef="let customer">
                        <div class="agmo-two-lines-wrapper">{{customer.email}}</div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="fullPhoneNumber">
                    <th mat-header-cell  *matHeaderCellDef>Phone No.</th>
                    <td mat-cell *matCellDef="let customer">{{customer.fullPhoneNumber || '-'}}</td>
                </ng-container>

                <ng-container matColumnDef="registerStep">
                    <th mat-header-cell  *matHeaderCellDef>Registration Status</th>
                    <td mat-cell *matCellDef="let customer">
                        <div class="status" [class.success]="customer.registerStep == 6">
                            {{RegisterStep[customer.registerStep]?.label || '-'}}
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="remove">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell class="size-s" *matCellDef="let customer">
                        <button mat-button (click)="removeCustomer(customer)">
                            <span class="font-weight-bold red-text">Remove</span>
                        </button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                <ng-container matColumnDef="loading">
                    <td mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length">
                        <mat-progress-bar mode="query"></mat-progress-bar>
                    </td>
                </ng-container>
            </mat-table>
        </div>
    </div>

    <div class="modal-footer">
        <button mat-button type="button" class="btn btn-light" (click)="cancel()">Cancel</button>
        <button mat-button class="primary darkblue" (click)="submit()">Assign</button>
    </div>
</div>
